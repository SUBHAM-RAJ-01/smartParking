{"ast":null,"code":"import React,{useEffect,useState}from'react';import API from'../api';import'../App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminDashboard(){const[slots,setSlots]=useState([]);const[msg,setMsg]=useState('');const[msgType,setMsgType]=useState('');const[stats,setStats]=useState({total:8,available:0,occupied:0});const fetchSlots=async()=>{try{const res=await API.get('/slots');setSlots(res.data);// Calculate stats\nconst available=res.data.filter(s=>!s.occupied).length;setStats({total:res.data.length,available,occupied:res.data.length-available});}catch(error){setMsg('Error fetching slots data');setMsgType('error');}};useEffect(()=>{fetchSlots();const interval=setInterval(fetchSlots,5000);// Poll every 5s\nreturn()=>clearInterval(interval);},[]);const handleForceRelease=async slotNumber=>{try{await API.post('/slots/admin/force-release',{slotNumber});setMsg(\"Slot #\".concat(slotNumber,\" has been successfully released\"));setMsgType('success');fetchSlots();}catch(error){setMsg('Error releasing slot');setMsgType('error');}};const handleAssign=async slotNumber=>{const licensePlate=prompt('Enter license plate to assign:');if(!licensePlate)return;try{await API.post('/slots/admin/assign',{slotNumber,licensePlate});setMsg(\"Slot #\".concat(slotNumber,\" has been assigned to \").concat(licensePlate));setMsgType('success');fetchSlots();}catch(error){setMsg('Error assigning slot');setMsgType('error');}};const formatTime=timestamp=>{if(!timestamp)return'-';return new Date(timestamp).toLocaleString();};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"dashboard-title\",children:\"Parking Management Dashboard\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-title\",children:\"Total Slots\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.total}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-subtitle\",children:\"Parking capacity\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-title\",children:\"Available Slots\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.available}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-subtitle\",children:\"Ready for parking\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-title\",children:\"Occupied Slots\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.occupied}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-subtitle\",children:\"Currently in use\"})]})]}),msg&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(msgType==='success'?'message-success':'message-error'),children:msg}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"dashboard-card-title\",children:\"Parking Slots Status\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Slot #\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Vehicle\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Entry Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:slots.map(slot=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:slot.slotNumber}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(slot.occupied?'status-occupied':'status-available'),children:slot.occupied?'Occupied':'Available'})}),/*#__PURE__*/_jsx(\"td\",{children:slot.vehicle||'-'}),/*#__PURE__*/_jsx(\"td\",{children:formatTime(slot.entryTime)}),/*#__PURE__*/_jsxs(\"td\",{className:\"action-btns\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"release-btn\",onClick:()=>handleForceRelease(slot.slotNumber),children:\"Force Release\"}),/*#__PURE__*/_jsx(\"button\",{className:\"assign-btn\",onClick:()=>handleAssign(slot.slotNumber),children:\"Manual Assign\"})]})]},slot.slotNumber))})]})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","API","jsx","_jsx","jsxs","_jsxs","AdminDashboard","slots","setSlots","msg","setMsg","msgType","setMsgType","stats","setStats","total","available","occupied","fetchSlots","res","get","data","filter","s","length","error","interval","setInterval","clearInterval","handleForceRelease","slotNumber","post","concat","handleAssign","licensePlate","prompt","formatTime","timestamp","Date","toLocaleString","className","children","map","slot","vehicle","entryTime","onClick"],"sources":["C:/Users/srajp/Desktop/wednesday/admin/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport API from '../api';\r\nimport '../App.css';\r\n\r\nexport default function AdminDashboard() {\r\n  const [slots, setSlots] = useState([]);\r\n  const [msg, setMsg] = useState('');\r\n  const [msgType, setMsgType] = useState('');\r\n  const [stats, setStats] = useState({\r\n    total: 8,\r\n    available: 0,\r\n    occupied: 0\r\n  });\r\n\r\n  const fetchSlots = async () => {\r\n    try {\r\n      const res = await API.get('/slots');\r\n      setSlots(res.data);\r\n      \r\n      // Calculate stats\r\n      const available = res.data.filter(s => !s.occupied).length;\r\n      setStats({\r\n        total: res.data.length,\r\n        available,\r\n        occupied: res.data.length - available\r\n      });\r\n    } catch (error) {\r\n      setMsg('Error fetching slots data');\r\n      setMsgType('error');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchSlots();\r\n    const interval = setInterval(fetchSlots, 5000); // Poll every 5s\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const handleForceRelease = async (slotNumber) => {\r\n    try {\r\n      await API.post('/slots/admin/force-release', { slotNumber });\r\n      setMsg(`Slot #${slotNumber} has been successfully released`);\r\n      setMsgType('success');\r\n      fetchSlots();\r\n    } catch (error) {\r\n      setMsg('Error releasing slot');\r\n      setMsgType('error');\r\n    }\r\n  };\r\n\r\n  const handleAssign = async (slotNumber) => {\r\n    const licensePlate = prompt('Enter license plate to assign:');\r\n    if (!licensePlate) return;\r\n    \r\n    try {\r\n      await API.post('/slots/admin/assign', { slotNumber, licensePlate });\r\n      setMsg(`Slot #${slotNumber} has been assigned to ${licensePlate}`);\r\n      setMsgType('success');\r\n      fetchSlots();\r\n    } catch (error) {\r\n      setMsg('Error assigning slot');\r\n      setMsgType('error');\r\n    }\r\n  };\r\n\r\n  const formatTime = (timestamp) => {\r\n    if (!timestamp) return '-';\r\n    return new Date(timestamp).toLocaleString();\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-dashboard\">\r\n      <div className=\"dashboard-header\">\r\n        <h2 className=\"dashboard-title\">Parking Management Dashboard</h2>\r\n      </div>\r\n      \r\n      <div className=\"stats-container\">\r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-title\">Total Slots</div>\r\n          <div className=\"stat-value\">{stats.total}</div>\r\n          <div className=\"stat-subtitle\">Parking capacity</div>\r\n        </div>\r\n        \r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-title\">Available Slots</div>\r\n          <div className=\"stat-value\">{stats.available}</div>\r\n          <div className=\"stat-subtitle\">Ready for parking</div>\r\n        </div>\r\n        \r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-title\">Occupied Slots</div>\r\n          <div className=\"stat-value\">{stats.occupied}</div>\r\n          <div className=\"stat-subtitle\">Currently in use</div>\r\n        </div>\r\n      </div>\r\n      \r\n      {msg && (\r\n        <div className={`message ${msgType === 'success' ? 'message-success' : 'message-error'}`}>\r\n          {msg}\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"dashboard-card\">\r\n        <div className=\"dashboard-card-header\">\r\n          <h3 className=\"dashboard-card-title\">Parking Slots Status</h3>\r\n        </div>\r\n        \r\n        <div className=\"table-container\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Slot #</th>\r\n                <th>Status</th>\r\n                <th>Vehicle</th>\r\n                <th>Entry Time</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {slots.map(slot => (\r\n                <tr key={slot.slotNumber}>\r\n                  <td>{slot.slotNumber}</td>\r\n                  <td>\r\n                    <span className={`status-badge ${slot.occupied ? 'status-occupied' : 'status-available'}`}>\r\n                      {slot.occupied ? 'Occupied' : 'Available'}\r\n                    </span>\r\n                  </td>\r\n                  <td>{slot.vehicle || '-'}</td>\r\n                  <td>{formatTime(slot.entryTime)}</td>\r\n                  <td className=\"action-btns\">\r\n                    <button \r\n                      className=\"release-btn\" \r\n                      onClick={() => handleForceRelease(slot.slotNumber)}\r\n                    >\r\n                      Force Release\r\n                    </button>\r\n                    <button \r\n                      className=\"assign-btn\" \r\n                      onClick={() => handleAssign(slot.slotNumber)}\r\n                    >\r\n                      Manual Assign\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}